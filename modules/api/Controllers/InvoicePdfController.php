<?php/*  * To change this license header, choose License Headers in Project Properties. * To change this template file, choose Tools | Templates * and open the template in the editor. */ class InvoicePdf{    protected $_request;	protected $_queryStr;	protected $_rawBody;	protected $_method;		public function __construct() {		// i am using ZEND 1.11 		// if ZEND 2, you should use Zend\Http\Request		// use this Zend Request Class as it does 		// most of the hard work for a web Request 		$this->_request = new Zend_Controller_Request_Http();				$this->_method = $this->_request->getMethod();				$func = strtolower(trim(str_replace("/","",$this->_method)));		if((int)method_exists($this,$func) <= 0) 		{		    //when a client makes a request using an unknown HTTP verb			header('HTTP/1.1 501 Not Implemented');			exit();		}				$this->_queryStr = $this->_request->getQuery();		$this->_rawBody = $this->_request->getRawBody();	}		public function get()	{		// we will dump the query_string		// with a message from GET METHOD		// if we get a get call		// $this->_request->getQuery()		// will return the $_SERVER['QUERY_STRING'] value				if($this->_method!="GET")		{     			//when a client makes a request using an HTTP verb not supported at the requested URL 			//(supported verbs are returned in the Allow header)			header('HTTP/1.1 405 Method Not Allowed');			exit();		}		if(!isset($this->_queryStr) || !isset($this->_queryStr["id"]) || !is_numeric($this->_queryStr["id"]))		{			//Incorrect parameters specified on request			header('HTTP/1.1 400 Bad Request');			exit();		}				try		{			$invoiceID = $this->_queryStr["id"];			$get_format = 'pdf';//$_GET['format'];			//$get_file_type = $_GET['filetype'];			#get the invoice id			$export = new export();			$export -> format = $get_format;			//$export -> file_type = $get_file_type;			$export -> file_location = 'download';			$export -> module = 'invoice';			$export -> id = $invoiceID;			$export -> execute();			exit();			//var_export($invoiceID);		}		catch (Exception $e)		{			//An unexpected error occurred			header('HTTP/1.1 500 Internal Server Error');			exit();		}	}	}